{% extends "base.html" %}

{% block content %}

<div class="container-md">
    <form id="login-form" action = "/api/authorization/login", method="POST">
       <h3>Login</h3>
       <div class="form-group mb-3">
          <label for="username">Username</label>
          <input type="text" class="form-control" id="username" name="username"  placeholder="Username">
       </div>
       <div class="form-group mb-3">
          <label for="password">Password</label>
          <input type="password" class="form-control" id="password" name="password" placeholder="Password">
       </div>
       <div class="d-flex justify-content-between">
          <p>Don't have an account? <a href="/signup">Register here</a></p>
          <button type="submit" class="btn btn-primary">Submit</button>
       </div>
    </form>
  </div>


<script>

$(document).ready(function() {
   $('#login-form').submit(function(event) {
      event.preventDefault(); // Prevent the form from submitting normally
      
      var username = $('#username').val();
      var password = $('#password').val();
      
      var formData = {
         username: username,
         password: password
      };
      
      // Send the AJAX request
      $.ajax({
         type: 'POST',
         url: '/api/authorization/login',
         data: formData,
         success: function(response) {
         console.log(response)
         window.localStorage.setItem("token",response.token);
         },
         error: function(xhr, status, error) {
         // Handle errors
         console.error(error);
         }
      });
   });
   });

</script>

{% endblock content %}